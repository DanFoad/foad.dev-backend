plugins {
  id 'scala'
  id 'com.github.johnrengelman.shadow' version '5.0.0'
}

repositories {
  mavenLocal()
  mavenCentral()
}

dependencies {
  compile 'org.scala-lang:scala-library:2.12.9'
}

project.task('start') {
  dependsOn(":foad.dev-backend-app:clean")
  dependsOn(":foad.dev-backend-app:shadowJar")

  doLast {
    project.exec {
      commandLine 'bash', '-c', "docker build -t backend . && docker run -p 8080:8080 --name foaddevbackend backend"
    }
  }
}